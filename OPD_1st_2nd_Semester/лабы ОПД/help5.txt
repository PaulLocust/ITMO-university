ORG 0x214 ; Программа начинается с адреса 214
STR: WORD 0x620 ; Размещаемая строка находится по адресу 620
POINTER: WORD ? ; ?? Указатель на текущие 2 символа

START: 
CLA
LD STR
ST POINTER ; Инициализируем указатель

RCOUNT: 
	IN 0x05
	AND #0x40
	BEQ RCOUNT
	IN 0x04
	ST (POINTER)+
	CMP #0x00
	BEQ HPROG

S1: 
	IN 0x05 ; Ожидание вывода первого символа
	AND #0x40 ; Бит 6 SR == 0 («Готов» нажата?)
	BEQ S1 ; Нет – «Спин-луп»
	IN 0x04
	ST (POINTER)
	CMP #0x00
	LOOP (STR)
	JUMP S2
	HLT

S2: 
	IN 0x05 ; Ожидание вывода второго символа
	AND #0x40 ; Бит 6 SR == 0 («Готов» нажата?)
	BEQ S2 ; Нет – «Спин-луп»
	LD (POINTER) ; 
	SWAB ; Выберем второй символ в младшем байте…
	IN 0x04
	ST (POINTER)+
	SXTB
	CMP #0x00
	LOOP (STR)
	JUMP S1 

HPROG: 
	HLT

ORG 0x620
WORD ?